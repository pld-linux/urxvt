--- rxvt-unicode-7.7/aclocal.m4.orig	2006-01-22 01:48:13.000000000 +0100
+++ rxvt-unicode-7.7/aclocal.m4	2006-03-09 14:05:56.048362500 +0100
@@ -176,7 +176,7 @@
   # Don't add to $LIBS permanently.
   ac_save_LIBS="$LIBS"
   LIBS="$LIBS $X_LIBS -lXpm -lX11"
-AC_TRY_LINK(, [XpmReadFileToPixmap()],
+AC_TRY_LINK([#include <X11/xpm.h>], [XpmReadFileToPixmap(0, 0, 0, 0, 0, 0);],
 [LIBS="$ac_save_LIBS"
 # We can link libXpm with no special library path.
 vt_xpm_libraries=],
diff -aurN rxvt-unicode-7.5.orig/configure.ac rxvt-unicode-7.5/configure.ac
--- rxvt-unicode-7.5.orig/configure.ac	2006-01-28 22:26:37.000000000 +0100
+++ rxvt-unicode-7.5/configure.ac	2006-02-04 20:46:00.617940000 +0100
@@ -88,11 +88,11 @@
 dnl fi
 
 dnl# FreeBSD needs to link libxpg4
-AC_CHECK_FUNC(setlocale,     [], [AC_CHECK_LIB(xpg4,   setlocale,     [LIBS="$LIBS -lxpg4"])])
+AC_SEARCH_LIBS(setlocale, xpg4)
 
 dnl# solaris needs to link libnsl and socket
-AC_CHECK_FUNC(gethostbyname, [], [AC_CHECK_LIB(nsl,    gethostbyname, [LIBS="$LIBS -lnsl"])])
-AC_CHECK_FUNC(socket,        [], [AC_CHECK_LIB(socket, socket,        [LIBS="$LIBS -lsocket"])])
+AC_SEARCH_LIBS(nsl, gethostbyname)
+AC_SEARCH_LIBS(socket, socket)
 
 dnl AC_ENABLE_SHARED(no)dnl#	libtool
 dnl AC_ENABLE_STATIC(yes)dnl#	libtool
